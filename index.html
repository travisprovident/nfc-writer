<!DOCTYPE html>
<html>
<head>
  <title>NFC Writer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="ProvLogo.png" type="image/png">
</head>
<body>

  <!-- Company Logo -->
  <div id="logoContainer">
    <img src="Provident_HeaderLogo_520_Over.webp" alt="Company Logo" id="logoImage" />
  </div>

  <div id="nfcWrapper">
    <h2>NFC Tag Writer</h2>

    <div class="form-group">
      <label for="modeSelect">Choose Mode:</label>
      <select id="modeSelect">
        <option value="single">Single Asset</option>
        <option value="batch">Batch Write</option>
      </select>
    </div>

    <div id="singleMode" class="mode-section">
      <div class="form-group">
        <label for="companySelectSingle">Choose Company:</label>
        <select id="companySelectSingle">
          <option value="">-- Select Company --</option>
          <option value="https://tinyurl.com/yr4c8nfc?id=">Provident Asset Tracker</option>
          <option value="https://tinyurl.com/2e88evx9?id=">Ideal Asset Tracker</option>
          <option value="https://tinyurl.com/2fc45ykf?id=">Alpha Asset Tracker</option>
          <option value="https://tinyurl.com/2cpxwvxn?id=">Ensign Asset Tracker</option>
          <option value="https://tinyurl.com/4c9r7ybn?id=">Other Asset Tracker</option>
        </select>
      </div>

      <div class="form-group">
        <label for="baseUrlSingle">Base URL</label>
        <input id="baseUrlSingle" type="text" placeholder="Enter base URL" />
      </div>

      <div class="form-group">
        <label for="assetIdSingle">Asset ID</label>
        <input id="assetIdSingle" type="text" placeholder="Enter asset ID" />
      </div>

      <div class="form-group">
        <button id="writeSingle" type="button" class="write-button">Write to NFC Tag</button>
        <button id="cancelScanSingle" class="cancel-scan">‚ùå Cancel Scan</button>
      </div>
    </div>

    <div id="batchMode" class="mode-section">
      <div class="form-group">
        <label for="companySelectBatch">Choose Company:</label>
        <select id="companySelectBatch">
          <option value="">-- Select Company --</option>
          <option value="https://tinyurl.com/yr4c8nfc?id=">Provident Asset Tracker</option>
          <option value="https://tinyurl.com/2e88evx9?id=">Ideal Asset Tracker</option>
          <option value="https://tinyurl.com/2fc45ykf?id=">Alpha Asset Tracker</option>
          <option value="https://tinyurl.com/2cpxwvxn?id=">Ensign Asset Tracker</option>
          <option value="https://tinyurl.com/4c9r7ybn?id=">Other Asset Tracker</option>
        </select>
      </div>

      <div class="form-group">
        <label for="baseUrlBatch">Base URL</label>
        <input id="baseUrlBatch" type="text" placeholder="Enter base URL" />
      </div>

      <div class="form-group">
        <label for="assetList">Asset ID List (one per line)</label>
        <textarea id="assetList" rows="5" placeholder="123\n124\n125"></textarea>
      </div>

      <div class="form-group">
        <button id="startBatch" class="start-batch-button">Start Batch Write</button>
      </div>

      <div id="batchControls" style="display:none;">
        <div id="assetNavInfo">
          <p><strong>Current Asset:</strong> <span id="currentAsset"></span></p>
          <p id="assetCountDisplay" style="font-size: 0.9rem; color: #555;"></p>
        </div>
        <div class="form-group">
          <button id="writeBatch" class="write-button">Write Tag for Current Asset</button>
          <button id="cancelScanBatch" class="cancel-scan">‚ùå Cancel Scan</button>
        </div>
        <div class="form-group asset-nav-buttons">
          <button id="prevAsset">‚¨ÖÔ∏è Previous</button>
          <button id="nextAsset">Next ‚û°Ô∏è</button>
        </div>
      </div>
    </div>

    <div id="status"></div>

    <div class="form-group reset-nav-group">
      <button id="resetBtn" type="button" class="reset-button">üîÑ Reset NFC Session</button>
      <button id="goBackBtn" type="button" class="go-back-button">‚¨ÖÔ∏è Return to Previous Page</button>
    </div>
  </div>

  <audio id="successSound" src="ding.mp3" preload="auto"></audio>

  <script>
    const returnBtn = document.getElementById("goBackBtn");
      returnBtn.addEventListener("click", () => {
        if (window.opener) {
          window.close();
        } else {
          window.location.href = "https://script.google.com/a/providentinspection.com/macros/s/AKfycbxsOlusze_S7gE2F7lmVSLl2MqG8kZCX8BPGwNyg3Q/dev?page=asset-add/serviceable";
        }
      });
  </script>

  <script src="script/state.js"></script>
  <script src="script/write.js"></script>
  <script src="script/main.js"></script>
</body>
</html>
